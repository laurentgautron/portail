{% extends 'layouts/base.html.twig' %}

{% block title %}{{ user.nom }}{{ user.prenom }}{% endblock %}

{% block body %}
    <div class="container d-flex">
        <div class="utilisateur">
            <p>Nom: {{ user.nom }}</p>
            <p>Prenom: {{ user.prenom }}</p>
            <p>Email: {{ user.email }}</p>
            <p>Adresse: {{ user.adresse }}</p>
            <p>Ville: {{ user.ville }}</p>
            <p>Code postal: {{ user.codePostal }}</p>
            <p>Téléphone: {{ user.telephone }}</p>
            <p>Date création: {{ user.createdAt | date('Y/m/d')}}</p>
            {% if app.user == null or (app.user.id != user.id and not is_granted('ROLE_ADMIN')) %}
            {% else %}
                <div class="cta">
                    <a href="{{ path('app_user_mod', { id: user.id }) }}" class='btn btn-primary'>Modifier</a>
                    {% if is_granted('ROLE_ADMIN') %}
                    <a href="{{ path('app_user_delete', { id: user.id }) }}" class='btn btn-danger'>Supprimer</a>
                    {% endif %}
                </div>
            {% endif %}
        </div>
        
        <div class="experienceContainer">
            <h2>Expériences</h2>
            {% if app.user == null or (app.user.id != user.id and not is_granted('ROLE_ADMIN')) %}
            {% else %}
                <a href="{{ path('app_experience_create', { id: user.id }) }}" class="btn btn-primary">Ajouter une expérience</a>
            {% endif %}
            {% for experience in user.exp %}
                <div class="experience">
                    <span>Du {{ experience.beginAt | date('Y/m/d') }} </span>
                    <span>AU {{ experience.stopAt | date('Y/m/d') }}</span>
                    <p>Descrition: {{ experience.description }}</p>
                    <p>fonction: {{ experience.fonction }}</p>
                    <p>Réalisation: {{ experience.realisation }}</p>
                    <p>Lieu: {{ experience.lieu }}</p>
                    <p>Contexte: {{ experience.contexte }}</p>
                    <p>Environnement technique: {{ experience.technique }}</p>
                    {% if app.user == null or (app.user.id != user.id and not is_granted('ROLE_ADMIN')) %}
                    {% else %}
                        <a href="{{ path('app_experience_delete', {id: experience.id}) }}" class="btn btn-danger">Supprimer</a>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>
    
    
    
{% endblock %}